
@{
    ViewBag.Title = "LeadPage";
    @Scripts.Render("~/bundles/jquery")

    if (HttpContext.Current.User.IsInRole("Administrator")) {
        @Html.Partial("_AdminMenu")
    } else 
    {
        @Html.Partial("_MainMenu")
    }
}

<h2>LeadPage</h2>

<div class="container">
    <div class="row">
        <div class="tabbable">
            <ul id="rowTab" class="nav nav-tabs">
                <li class="active"><a href="#customerTab" class="tab" data-toggle="tab">Customer</a></li>
                <li><a href="#leadTab" class="tab" data-toggle="tab">Lead</a></li>
                <li><a href="#productsTab" class="tab" data-toggle="tab">Products and Materials</a></li>
                <li><a href="#installTab" class="tab" data-toggle="tab">Installation</a></li>
                <li><a href="#summaryTab" class="tab" data-toggle="tab">Summary</a></li>
                <li><a href="#printTab" class="tab" data-toggle="tab">Print</a></li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane" id="customerTab">
                    @{  if (ViewBag.leadNumber == 0)
                        {
                       
                        }
                        else
                        {
                            if (ViewBag.editable)
                            {

                            }
                        }
                    }
                   @*@Html.Action("CustomerTab", new { id = ViewBag.lead != null ? ViewBag.lead.lead_number : 0, edit = ViewBag.editable })*@
                </div>
                <div class="tab-pane active in" id="leadTab">
                    @*@{  if (ViewBag.leadNumber == 0)
                        {
                            @Html.Action("Add", "Emp", new { id = ViewBag.leadNumber, edit = ViewBag.editable })
                        }
                        else
                        {
                            @Html.Action("Edit", "Emp", new { id = ViewBag.leadNumber, edit = ViewBag.editable })
                        }
                    }*@
                    @Html.Action("LeadTab", new { id = ViewBag.lead != null ? ViewBag.lead.lead_number : 0, edit = ViewBag.editable })
                </div>
                <div class="tab-pane" id="productsTab">
                    Products Info
                </div>
                <div class="tab-pane" id="installTab">
                    Installation Info
                </div> 
                <div class="tab-pane" id="summaryTab">
                    @Html.Action("SummaryTab", new { id = ViewBag.lead != null ? ViewBag.lead.lead_number : 0 })
                </div>
                <div class="tab-pane" id="printTab">
                    @Html.Action("PrintTab", new { id = ViewBag.lead != null ? ViewBag.lead.lead_number : 0 })
                </div>
            </div>
        </div>
    </div>
</div> 


<script>
    $(function () {
        var hash = window.location.hash;
        hash && $('ul.nav a[href="' + hash + '"]').tab('show');

        $('.nav-tabs a').click(function (e) {
            $(this).tab('show');
            var scrollmem = $('body').scrollTop() || $('html').scrollTop();
            window.location.hash = this.hash;
            $('html,body').scrollTop(scrollmem);
        });

        // Change tab on hashchange
        window.addEventListener('hashchange', function () {
            var changedHash = window.location.hash;
            changedHash && $('ul.nav a[href="' + changedHash + '"]').tab('show');
        }, false);
    });
</script>
